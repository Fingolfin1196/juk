#MIN_CONFIG(3)

AM_INIT_AUTOMAKE(juk,1.0)

if test "x$have_taglib" = "xfalse" || test "x$build_arts" = "xno"; then
	DO_NOT_COMPILE="$DO_NOT_COMPILE juk"
fi

if test "x$build_arts" = "xno"; then
	DO_NOT_COMPILE="$DO_NOT_COMPILE juk"
fi

AC_DEFUN([AC_HAVE_GST],
[
	AC_DEFINE(HAVE_GSTREAMER, 1, [have GStreamer])
	have_gst=true
])

AC_DEFUN([AC_NO_GST],
[
	AC_DEFINE(HAVE_GSTREAMER, 0, [don't have GStreamer])
	have_gst=false
])

KDE_CHECK_HEADER(kde/gst/gstreamer.h,
	AC_HAVE_GST,
	AC_NO_GST
)

AC_DEFUN([AC_HAVE_MUSICBRAINZ],
[
	AC_DEFINE(HAVE_MUSICBRAINZ, 1, [have MusicBrainz])
	have_musicbrainz=true
])

AC_DEFUN([AC_NO_MUSICBRAINZ],
[
	AC_DEFINE(HAVE_MUSICBRAINZ, 0, [have MusicBrainz])
	have_musicbrainz=false
])

AC_LANG_SAVE
AC_LANG_CPLUSPLUS
AC_MSG_CHECKING(for tunepimp)
AC_TRY_COMPILE([
#include <tunepimp/tp_c.h>
], [
  tunepimp_t m_pimp;
  tp_AddFile(m_pimp, "myfile");
  return 0;
],
[ 
  AC_MSG_RESULT(yes)
  AC_HAVE_MUSICBRAINZ
],
[
  AC_MSG_RESULT(no)
  AC_NO_MUSICBRAINZ
])
AC_LANG_RESTORE

if test -z "$TRM" ; then
   AC_DEFINE(HAVE_TRM,0,[Is trm program present])
else
   AC_DEFINE(HAVE_TRM,1,[Is trm program present])
fi


AM_CONDITIONAL(link_lib_GST, test x$have_gst = xtrue)
AM_CONDITIONAL(link_lib_MB, test x$have_musicbrainz = xtrue)
