#MIN_CONFIG(3)

have_id3lib=true

AM_INIT_AUTOMAKE(juk,1.0)

AC_DEFUN(AC_NO_ID3LIB, 
[
	have_id3lib=false
	DO_NOT_COMPILE="$DO_NOT_COMPILE juk"
])

KDE_CHECK_HEADER(id3/tag.h,
	,
	AC_NO_ID3LIB
)

AC_DEFUN(AC_HAVE_GST,
[
	AC_DEFINE(HAVE_GSTREAMER, 1, [have GStreamer])
	have_gst=true
])

AC_DEFUN(AC_NO_GST,
[
	AC_DEFINE(HAVE_GSTREAMER, 0, [don't have GStreamer])
	have_gst=false
])

KDE_CHECK_HEADER(kde/gst/gstreamer.h,
	AC_HAVE_GST,
	AC_NO_GST
)

AC_DEFUN(AC_HAVE_MUSICBRAINZ,
[
	AC_DEFINE(HAVE_MUSICBRAINZ, 1, [have MusicBrainz])
	have_musicbrainz=true
])

AC_DEFUN(AC_NO_MUSICBRAINZ,
[
	AC_DEFINE(HAVE_MUSICBRAINZ, 0, [have MusicBrainz])
	have_musicbrainz=false
])

KDE_CHECK_HEADER(musicbrainz/musicbrainz.h,
	AC_HAVE_MUSICBRAINZ,
	AC_NO_MUSICBRAINZ
)

KDE_FIND_PATH(trm,TRM,[$kde_default_bindirs],[
  AC_MSG_WARN([Could not find trm utility anywhere, check http://www.musicbrainz.org/products/trmgen/download.html for TRM Generator.])
])
if test -z "$TRM" ; then
   AC_DEFINE(HAVE_TRM,0,[Is trm program present])
else
   AC_DEFINE(HAVE_TRM,1,[Is trm program present])
fi


AM_CONDITIONAL(link_lib_GST, test x$have_gst = xtrue)
AM_CONDITIONAL(link_lib_MB, test x$have_musicbrainz = xtrue)
